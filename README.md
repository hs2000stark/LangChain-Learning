Updated rewritten code based on andrew ng's langchain course.
